openapi: 3.0.0

security:
  - basicAuth: []

info:
  description: ''
  version: 0.0.1
  title: Global System I/F API

tags:
  - name: Product Feed API
  - name: Pricing API
  - name: AISD Notify Me API
  - name: Disambiguation API

paths:
  '/syndication/regional/v2/skus/{locale}':
    get:
      tags:
        - Product Feed API
      summary: Product Feed List API
      description: >-
        ロケールに紐付く有効なSKUの各々について Details API のURLを返却する。
      operationId: APID011
      parameters:
        - name: locale
          in: path
          description: Locale to get
          required: true
          schema:
            type: string
            example: en_GB
        - name: dataStage
          in: query
          description: dataStage to get
          required: false
          schema:
            type: string
            enum:
              - Retailer
              - FSMC
            example: "Retailer"
        - name: updateDate
          in: query
          description: Get updated data after a specified date
          required: false
          schema:
            type: string
            format: date-time
            example: "2019-01-01T00:00:00.000Z"
        - name: dataFormat
          in: query
          description: Output format specification
          required: false
          schema:
            type: string
            example: JSON
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/product-feed-list"
            text/xml:
              schema:
                $ref: "#/components/schemas/product-feed-list"
        '400':
          description: BudRequest
        '500':
          description: InternalServerError

  '/syndication/regional/v2/skus/detail/{locale}/{slug}':
    get:
      tags:
        - Product Feed API
      summary: Product feed v2 Details
      description: >-
        Product Syndication Detail 情報を取得するためのAPI。
      operationId: APID012
      parameters:
        - name: locale
          in: path
          description: Locale to get
          required: true
          schema:
            type: string
            example: en_GB
        - name: slug
          in: path
          description: sku slug
          required: true
          schema:
            type: string
            example: ILCE7RB.CE
        - name: dataStage
          in: query
          description: dataStage to get
          required: false
          schema:
            type: string
            example: Retailer
        - name: dataFormat
          in: query
          description: Output format specification
          required: false
          schema:
            type: string
            example: JSON
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/product-feed-detail"
            text:xml:
              schema:
                $ref: "#/components/schemas/product-feed-detail"
        '400':
          description: BudRequest
        '500':
          description: InternalServerError

  '/syndication/regional/v3/skus/detail/{locale}/{slug}':
    get:
      tags:
        - Product Feed API
      summary: Product feed v3 Details
      description: >-
        Product Syndication Detail 情報を取得するためのAPI。 
      operationId: APID013
      parameters:
        - name: locale
          in: path
          description: Locale to get
          required: true
          schema:
            type: string
            example: en_GB
        - name: slug
          in: path
          description: sku slug
          required: true
          schema:
            type: string
            example: ILCE7RB.CE
        - name: dataStage
          in: query
          description: dataStage to get
          required: false
          schema:
            type: string
            example: Retailer
        - name: dataFormat
          in: query
          description: Output format specification
          required: false
          schema:
            type: string
            example: JSON
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/product-feed-detail"
            text:xml:
              schema:
                $ref: "#/components/schemas/product-feed-detail"
        '400':
          description: BudRequest
        '500':
          description: InternalServerError

  '/pricing/lists/{locale}':
    get:
      tags:
        - Pricing API
      summary: Price List GET API
      description: >-
        SKU単位で保持する製品のPriceを参照するAPI。
      operationId: APID021
      parameters:
        - name: locale
          in: path
          description: Locale to get
          required: true
          schema:
            type: string
            example: en_GB
      responses:
        '200':
          description: OK
          content:
            text/csv:
              example: |-
                sku_name,locale,amount,currency
                "2NPBN1.CE","en_GB","23.99","GBP"
                "312DESBTMAN.YD","en_GB","10.00","GBP"
                "RDPX200IPN.EU8","en_GB","199.00","GBP"
                "RDPXA700IPN.EU8","en_GB",,,
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/price'
        '400':
          description: BudRequest
        '500':
          description: InternalServerError
    post:
      tags:
        - Pricing API
      summary: Price List POST API (Full upload)
      description: >-
        SKU単位で保持する製品のPriceを一括更新する。
      operationId: APID023
      parameters:
        - name: locale
          in: path
          description: Locale to post
          required: true
          schema:
            type: string
            example: en_GB
      requestBody:
        content:
          text/csv:
            example: |-
              sku_name,locale,amount,currency
              "2NPBN1.CE","en_GB","22.39","GBP"
              "2NPBN1.CE","en_IE","10.00","EUR"
              "2NPBN1.CE","en_US","199.00","USD"
            schema:
              type: array
              items:
                $ref: '#/components/schemas/price'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/price-responce'
        '400':
          description: BudRequest
        '500':
          description: InternalServerError

  '/pricing/prices':
    post:
      tags:
        - Pricing API
      summary: Price List POST API (Incremental)
      description: >-
        SKU単位で保持する製品のPriceを一括更新する。
      operationId: APID022
      requestBody:
        content:
          text/csv:
            example: |-
              sku_name,locale,amount,currency
              "2NPBN1.CE","en_GB","23.99","GBP"
              "2NPBN1.CE","en_IE","10.00","EUR"
              "2NPBN1.CE","en_US","199.00","USD"
            schema:
              type: array
              items:
                $ref: '#/components/schemas/price'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/price-responce'
        '400':
          description: BudRequest
        '500':
          description: InternalServerError

  '/products/buy-info/{locale}':
    get:
      tags:
        - AISD Notify Me API
      summary: AISD/Notify me GET API
      description: >-
        Buyボタン表示開始日とBuyボタン表示前のリンク先を取得する。
      operationId: APID041
      parameters:
        - name: locale
          in: path
          description: Locale to get
          required: true
          schema:
            type: string
            example: en_GB
      responses:
        '200':
          description: OK
          content:
            text/csv:
              example: |-
                name,locale,availableInStoreDate,timeZone,notifyMeFlag,notifyMeUrl
                "FDA-EV1MK","en_GB","2016-10-01 08:00:00","Europe/Istanbul",,
                "LCJ-HN","en_GB","2016-03-09 12:34","Europe/London","Yes","http://www...."
                "SAL20F28","en_GB","",,,
                "LCJ-HL","en_GB","",,,"
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/buy-info'
        '400':
          description: BudRequest
        '500':
          description: InternalServerError

  '/products/buy-info':
    post:
      tags:
        - AISD Notify Me API
      summary: AISD/Notify me POST API
      description: >-
        Buyボタン表示開始日とBuyボタン表示前のリンク先を一括更新する。
      operationId: APID042
      requestBody:
        content:
          text/csv:
            example: |-
              name,locale,availableInStoreDate,timeZone,notifyMeFlag,notifyMeUrl
              "FDA-EV1MK","en_GB","2016-10-01 08:00:00","Europe/Istanbul",,
              "LCJ-HN","en_GB","2016-03-09 12:34","Europe/London","Yes","http://www...."
              "SAL20F28","en_GB","",,,
              "LCJ-HL","en_GB","",,,"
            schema:
              type: array
              items:
                $ref: '#/components/schemas/buy-info'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/updateresponse'
        '400':
          description: BudRequest
        '500':
          description: InternalServerError

  '/product/family-hierarchy/v1/{slug}':
    get:
      tags:
        - Disambiguation API
      summary: Disambiguation API
      description: >-
        Productの階層構造を取得して返却する。
      operationId: APID051
      parameters:
        - name: slug
          in: path
          description: API version
          required: true
          schema:
            type: string
        - name: locale
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/fammily-hierarchy'
        '404':
          description: NotFound

components:
  schemas:

    product-feed-list:
      type: object
      properties:
        startDate:
          type: string
          example: "1970-01-01T00:00:00.000Z"
        endDate:
          type: string
          example: "2015-05-04T11:45:47.163Z"
        skus:
          type: object
          properties:
            locale.code:
              type: array
              items:
                type: string
                example: "{domain}/syndication/regional/v2/skus/en_US/sal70300g-uc"
    
    product-feed-detail:
      type: object
      properties:
        locale:
          type: string
          example: "en_GB"
        skuName:
          type: string
          example: "ILCE7RB.CE"
        modelName:
          type: string
          example: "ILCE-7R"
        superModelName:
          type: string
          example: ""
        tier:
          type: string
          example: "2"
        marketingProducetName:
          type: string
          example: "a7R Full-frame ILC body only (no lens included)"
        longMarketingProductName:
          type: string
          example: "a7R Full-frame ILC body only (no lens included)"
        longDescription:
          type: string
          example: ""
        categories:
          type: object
          properties:
            mainCategory:
              type: array
              example: '["tv-home-cinema", "home-cinema", "home-cinema-video-cables"]'
              items:
                type: string
            allCategory:
              type: array
              items:
                type: array
                example: '["energy-storage-cables", "cables", "video-cables"]'
                items:
                  type: string
        relateProducts:
          type: object
          properties:
            accessoryProducts:
              type: array
              items:
                type: object
                properties:
                  product:
                    type: string
                    example: "ECMXYST1M.CE7"
        featureIcons:
          type: array
          items:
            type: object
            properties:
              copy:
                type: string
                example: "36.4MP Full-Frame Exmor CMOS Sensor"
        techSpecs:
          type: array
          items:
            $ref: "#/components/schemas/techSpec"
        keyTechSpecs:
          type: array
          items:
            $ref: "#/components/schemas/spec"
        topFeature:
          type: string
          example: "36.4MP Full-Frame Exmor CMOS Sensor"
        topFeatures:
          type: array
          example: '["36.4MP Full Frame Exmor CMOS sensor","Fast Intelligent autofocus system"]'
          items:
            type: string
        sunriseDateTime:
          type: integer
          format: int64
          example: 1134342000000
        createAt:
          type: integer
          format: int64
          example: 1384931707393
        specialDistribution:
          type: string
          example: ""
        identifiers:
          type: array
          items:
            $ref: "#/components/schemas/identifiers"
        energyLevel:
          $ref: "#/components/schemas/display-name"
        ecoFeatures:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
                example: ""
        images:
          $ref: "#/components/schemas/images"
        videos:
          $ref: "#/components/schemas/videos"
        featureBenefits:
          type: array
          items:
            $ref: "#/components/schemas/feature-benefit"
        cybershotBestFor:
          $ref: "#/components/schemas/display-name"
        cybershotFeatures:
          type: array
          items:
            $ref: "#/components/schemas/display-name"
        cybershotMegapixels:
          $ref: "#/components/schemas/display-name"
        mainProductType:
          $ref: "#/components/schemas/display-name"
        nextImageSensor:
          $ref: "#/components/schemas/display-name"
        rootColerEquivalent:
          $ref: "#/components/schemas/display-name"
        tvFeatures:
          type: array
          items:
            $ref: "#/components/schemas/display-name"
        televisionScreenSize:
          $ref: "#/components/schemas/display-name"
        tvType:
          $ref: "#/components/schemas/display-name"
        walkmanFeatures:
          type: array
          items:
            $ref: "#/components/schemas/display-name"
        walkmanItemMemory:
          $ref: "#/components/schemas/display-name"
        walkmanType:
          $ref: "#/components/schemas/display-name"
        inTheBox:
          type: array
          example: '["Power cord","Rechargeable Battery NP-FW50"]'
          items:
            type: string
        floatingFootnotes:
          type: array
          items:
            type: string
            example: ""
        highlights:
          type: array
          items:
            $ref: "#/components/schemas/display-name"
        awardsAndReviews:
          type: object
          properties:
            awards:
              type: array
              items:
                $ref: "#/components/schemas/award"
            expertReviews:
              type: array
              items:
                $ref: "#/components/schemas/review"
        eanCodes:
          type: array
          items:
            type: string
            example: "4905524958485"
        upcCodes:
          type: array
          items:
            type: string
            example: "4905524958485"
        model:
          $ref: "#/components/schemas/model"
        superModel:
          $ref: "#/components/schemas/super-model"

    techSpec:
      type: object
      properties:
        name:
          type: string
          example: "alphaLens"
        displayName:
          type: string
          example: "Lens"
        specs:
          type: array
          items:
            $ref: "#/components/schemas/spec"

    spec:
      type: object
      properties:
        displayName:
          type: string
          example: "Lens Mount"
        name:
          type: string
          example: "aAlphaLensesLensMount"
        keySpecRank:
          type: integer
          example: 10
        specType:
          type: string
          example: "text"
        value:
          type: array
          example: '["Sony E-mount lenses"]'
          items:
            type: string

    identifiers:
      type: object
      properties:
        eightDigitCodes:
          type: string
          example: ""
        bazaarVoiceExxternalId:
          type: string
          example: "ilce7rb.ce"
        id:
          type: string
          example: "urn:sony:product:sku:[sku]ilce7_rb.ce_en_gb"
          
    images:
      type: object
      properties:
        primaryShot:
          type: array
          items:
            $ref: "#/components/schemas/image"
        productShots:
          type: array
          items:
            $ref: "#/components/schemas/image"
        dimensionShots:
          type: array
          items:
            $ref: "#/components/schemas/image"
        detailsDimensionShots:
          type: array
          items:
            $ref: "#/components/schemas/image"
        lifestyleShots:
          type: array
          items:
            $ref: "#/components/schemas/image"
        ecoMessageShots:
          type: array
          items:
            $ref: "#/components/schemas/image"

    image:
      type: object
      properties:
        imageFamily:
          type: object
          properties:
            imeages:
              type: object
              properties:
                desktop:
                  type: object
                  properties:
                    externalUrl:
                      type: string
                      example: "{domain}/is/image/gwtprod/b253a3080736b149045d348d391db2cd?fmt=jpeg"
    videos:
      type: object
      properties:
        productVideos:
          type: array
          items:
            $ref: "#/components/schemas/video"
    
    video:
      type: object
      properties:
        videoFamily:
          type: object
          properties:
            videoProvider:
              type: string
              example: ""
            videoName:
              type: string
              example: ""
            externalUrl:
              type: string
              example: ""
            subtitleUrl:
              type: string
              example: ""

    feature-benefit:
      type: object
      properties:
        headline:
          type: string
          example: "36.4 MP 35mm full frame sensor"
        bodyCopy:
          type: string
          example: "Sony, one of the worlds leading makers of image sensors, combined its top new technologies to achieve high resolution and outstanding image quality. This revolutionary 35mm full-frame Exmor CMOs image sensor collects light with record efficiency to achieve high sensitivity, a wide dynamic range and an incredible new level of realism, while significantly reducing noise."
        link:
          type: object
          properties:
            url:
              type: string
              example: "{domain}/pmm/"
            label:
              type: string
              example: "Find compatible devices"
        shot:
          $ref: "#/components/schemas/image"

    display-name:
      type: object
      properties:
        displayName:
          type: string
          example: "camera"

    award:
      type: object
      properties:
        title:
          type: string
          example: "Digitalkamera.de"
        description:
          type: string
          example: "Best CSC Professional"
        date:
          type: string
          example: "2014"
        image:
          $ref: "#/components/schemas/image"
        link:
          type: object
          properties:
            url:
              type: string
              example: "{domain}/photo-announcements/540380/amateur-photographer-awards-2014"
        quote:
          type: string
          example: "Gold award"
      
    review:
      type: object
      properties:
        title:
          type: string
          example: "TIPA"
        description:
          type: string
          example: "Best Compact System Camera 2014 - TIPA"
        image:
          $ref: "#/components/schemas/image"
        link:
          type: object
          properties:
            url:
              type: string
              example: "{domain}/awards-en/sony-alpha-7r"
        quote:
          type: string
          example: "Best Compact System Camera 2014 - TIPA"

    model:
      type: object
      properties:
        slug:
          type: string
          example: "ilce-7r"
        indentifers:
          type: object
          properties:
            bazaarVoiceExternalId:
              type: string
              example: 'ilce-7r'
            id:
              type: string
              example: 'urn:sony:product:model:[model]ilce_7_r_en_gb'
        modelNumber:
          type: string
          example: "ILCE-7R"
        marketingProducctName:
          type: string
          example: "a7R E-mount Camera with Full Frame Sensor"
        topFeature:
          type: array
          items:
            type: string
            example: ""
        topFeatures:
          type: array
          example: '["36.4MP Full Frame Exmor CMOS sensor","Fast Intelligent autofocus system"]'
          items:
            type: string
        processorLogoShots:
          type: string
          example: ""
        images:
          type: object
          properties:
            primaryShot:
              type: array
              items:
                $ref: "#/components/schemas/image"

    super-model:
      type: object
      properties:
        slug:
          type: string
          example: "ilce-7r"
        identifers:
          type: object
          properties:
            bazaaVoiceExternalId:
              type: string
              example: "ilec-7r"
            id:
              type: string
              example: "urn:sony:product:supermodel:[SM]a9_series_en_gb"
        marketingProductName:
          type: string
          example: "a7R E-mount Camera with Full Frame Sensor"
        topFeature:
          type: array
          items:
            type: string
            example: ""
        topFeatures:
          type: array
          example: '["36.4MP Full Frame Exmor CMOS sensor","Fast Intelligent autofocus system"]'
          items:
            type: string

    price:
      type: object
      required:
        - skuName
        - locale
      properties:
        skuName:
          type: string
          example: '2NPBN1.CE'
        locale:
          type: string
          example: 'en_GB'
        amount:
          type: number
          format: double
          example: 23.99
        currency:
          type: string
          example: 'GBR'

    price-error-detailes:
      type: object
      properties:
        record:
          $ref: '#/components/schemas/price'
        errorMessage:
          type: string

    price-responce:
      type: object
      properties:
        succeeded:
          type: object
          properties:
            count:
              type: integer
              example: 1
        failed:
          type: object
          properties:
            count:
              type: integer
              example: 1
            details:
              type: array
              items:
                $ref: '#/components/schemas/price-error-detailes'
        ignored:
          type: object
          properties:
            count:
              type: integer
              example: 1
            details:
              type: array
              items:
                $ref: '#/components/schemas/price-error-detailes'

    buy-info:
      type: object
      properties:
        name:
          type: string
          example: ACC-BBV5
        locale:
          type: string
          example: en_GB
        availableInStoreDate:
          type: string
          example: '2019-12-21 17:15:05'
        timeZone:
          type: string
          description: timezone for availableStoreDate
          example: 'Europe/London'
        notifyMeFlag:
          type: string
          description: flag for is notify me
          example: 'Yes'
        notifyMeUrl:
          type: string
          example: 'http://www....'

    updateresponse:
      type: object
      properties:
        succeeded:
          type: object
          properties:
            count:
              type: integer
              example: 20
        failed:
          type: object
          properties:
            count:
              type: string
              example: 5
            details:
              type: array
              items:
                type: object
                description: failed data details
                properties:
                  record:
                    type: object
                    properties:
                      name:
                        type: string
                        example: 'NEX-5R'
                      locale:
                        type: string
                        example: 'en_GT'
                      availableInStoreDate:
                        type: string
                        example: '2019-12-21 17:15:05'
                      timeZone:
                        type: string
                        example: 'Europe/Istanbul'
                      notifyMeFlag:
                        type: string
                        example: 'Yes'
                      notifyMeUrl:
                        type: string
                        example: 'https://wwww....'
                  errorMessage:
                    type: string
                    example: 'invalid locale'
        ignored:
          type: object
          properties:
            count:
              type: integer
              example: 10
            details:
              type: array
              items:
                type: object
                description: ingnored data details
                properties:
                  record:
                    type: object
                    properties:
                      name:
                        type: string
                        example: 'NEX-5RA'
                      locale:
                        type: string
                        example: 'en_GB'
                      availableInStoreDate:
                        type: string
                        example: '2019-12-21 17:15:05'
                      timeZone:
                        type: string
                        example: 'Europe/Istanbul'
                      notifyMeFlag:
                        type: string
                        example: 'Yes'
                      notifyMeUrl:
                        type: string
                        example: 'https://www....'
                  errorMessage:
                    type: string
                    example: 'product is not in products table'

    fammily-hierarchy:
      type: object
      properties:
        name:
          type: string
          example: 'ILCE-6000 BODY / KIT'
        type:
          type: string
          example: 'urn:sony:product:super'
        slug:
          type: string
          example: 'ilce-6000-body-kit'
        marketingProductName:
          type: string
          example: 'α6000 E-mount camera with APS-C Sensor'
        images:
          $ref: '#/components/schemas/disambiguation-images'
        displayName:
          type: string
          example: 'ILCE-6000 / ILCE-6000L / ILCE-6000Y / ILCE-6000Z'
        differentiators:
          type: array
          items:
            $ref: '#/components/schemas/disambiguation-differentiator'
        canonicalUrl:
          type: string
          example: '{domain}/electronics/interchangeable-lens-cameras/ilce-6000-body-kit'
        models:
          type: array
          items:
            $ref: '#/components/schemas/disambiguation-model'

    disambiguation-model:
      type: object
      properties:
        name:
          type: string
          example: 'ILCE-6000'
        type:
          type: string
          example: 'urn:sony:product:model'
        slug:
          type: string
          example: 'ilce-6000'
        images:
          $ref: "#/components/schemas/disambiguation-images"
        differentiatorValues:
          type: object
          properties:
            differentiators.name:
              $ref: '#/components/schemas/disambiguation-differentiator'
        differentiators:
          type: array
          items:
            $ref: '#/components/schemas/disambiguation-differentiator'
        displayName:
          type: string
          example: 'ILCE-6000'
        skus:
          type: array
          items:
            $ref: '#/components/schemas/disambiguation-sku'

    disambiguation-sku:
      type: object
      properties:
        name:
          type: string
          example: 'ILCE-6000'
        type:
          type: string
          example: 'urn:sony:product:sku'
        slug:
          type: string
          example: 'ilce6000s.cec'
        images:
          $ref: "#/components/schemas/disambiguation-images"
        differentiatorValues:
          type: object
          properties:
            alphaKitVariations:
              $ref: '#/components/schemas/disambiguation-differentiator'
        eanCodes:
          type: array
          items:
            type: string
            example: '4905524974294'
        eightDigitCodes:
          type: array
          items:
            type: string
            example: '4905524974294'
        upcCodes:
          type: array
          items:
            type: string
            example: '4905524974294'

    disambiguation-differentiator:
      type: object
      properties:
        name:
          type: string
          example: 'alphaKitVariations'
        displayName:
          type: string
          example: 'Alpha Kit Variations'
            
    disambiguation-images:
      type: object
      properties:
        primaryShot:
          type: object
          properties:
            thumbnail:
              type: string
              example: '{domain}/is/image/gwtprod/e39515fe9315ea08ead0b44f283a1653?fmt=png-alpha&wid=330'

          